<!--The content below is only a placeholder and can be replaced.-->
<div class="container">
  <header class="header">
    <img id="oLogo" src="../assets/img/oLogo.png">
    <div class="h1">
      <h1>SITREP</h1>
    </div>
    <nav id="nav">
      <ul>
        <!-- <li><a href="#">Today's report</a></li> -->
        <li><a href="#">Previous Reports</a></li>
      </ul>
    </nav>
  </header>
  <div class="line">
    <button class="addStore" (click)="newStore()">Add Store</button>
    <button class="printRep" (click)="callPrintRep()">Print Report</button>
  </div>
  <div class="content">
    <div class="form shade" *ngFor="let store of stores">
      <section class="issue_header">
        <div class="store">
          <p>Store #<span class="storeNum">{{store.storeNumber}}</span></p>
        </div>
        <div class="down">
          <p>Down Time: <span class="down_time">{{down_time}}</span></p>
        </div>
        <div class="status">
          <p class="status_text">OPEN</p>
        </div>
      </section>
      <section class="info">
        <div class="edit_info">
          <i class="fas fa-pencil-alt fa-xs" title="Edit Info"></i>
        </div>
        <div class="info_details">
          <div class="type">
            <label for="issue_type">Issue</label>
            <p>{{store.issue}}</p>
          </div>
          <div class="serv_type" *ngIf="store.issue === 'SERVER'">
            <label for="type_num">Server Type</label>
            <p class="type_num">{{store.serverType}}</p>
          </div>
          <div class="serv_model" *ngIf="store.issue === 'SERVER'">
            <label for="model_num">Server Model</label>
            <p class="model_num">{{store.serverModel}}</p>
          </div>
          <div class="comm_Pro">
            <label for="provider">Provider</label>
            <p class="provider">{{store.provider}}</p>
          </div>
          <div class="bmc_tick">
            <label for="bmc_Num">BMC Ticket</label>
            <p>{{store.bmcTicket}}</p>
          </div>
          <div class="vend_tick">
            <label for="vend_Num">Vendor Ticket</label>
            <p class="vend_num">{{store.serviceTicket}}</p>
          </div>
        </div>
      </section>
      <section class="updates">
        <div class="issue_row">
          <div class="date_row">
            <p>Date</p>
          </div>
          <div class="time_row">
            <p>Time</p>
          </div>
          <div class="comment_row">
            <p>Updates</p>
          </div>
        </div>
        <div class="entries">
          <div class="entry" *ngFor="let update of store.updates" (mouseenter)="hoverOver('edit_btns')"
            (mouseleave)="hoverOff('edit_btns')">
            <div class="date_entry">
              <p>{{update.date}}</p>
            </div>
            <div class="time_entry">
              <p>{{update.time}}</p>
            </div>
            <div class="entry_text">
              <p>{{update.message}}</p>
            </div>
            <div class="edit_entry" id="edit_btns">
              <i class="fas fa-pencil-alt fa-xs" title="Edit Update"></i>
              <i class="fas fa-trash-alt fa-xs" (click)="callDeleteUpdate(update._id)" title="Delete Update"></i>
            </div>
          </div>
        </div>
      </section>
      <section class="add_update">
        <form class="add" *ngIf="showAddUpdate == store.storeId" (submit)="addUpdateToList(postForm, store)"
          #postForm="ngForm">
          <p class="add_header">Add Update</p>
          <div class="dateTime">
            <label for="new_date">Date:</label>
            <input class="new_date" type="date" [(ngModel)]="new_date" name="new_date" min="2020-01-01" max="2025-01-01"
              required>
            <label for="new_time">Time:</label>
            <input class="new_time" type="time" [(ngModel)]="new_time" name="new_time" min="00:00" max="24:00" required>
          </div>
          <div class="new_entry_text">
            <textarea class="new_text" [(ngModel)]="new_text" name="new_text" placeholder="What's new?"></textarea>
          </div>
          <div class="new_entry_btns">
            <button class="post_up" type="submit">POST</button>
            <button class="delete_up" type="button" (click)="callCancelUpdate()">X</button>
          </div>
        </form>
        <div class="update">
          <button class="update_btn" (click)="callUpdateBtn(store.storeId)"
            *ngIf="showUpdateBtn !== store.storeId">Update</button>
          <button class="resolve_btn">Resolve</button>
          <button class="delete_btn" (click)="callDeleteStore(store.storeId)">Delete</button>
        </div>
      </section>
    </div>

    <form class="form shade" id="add_new_store" *ngIf="showStore" (submit)="saveStore(postForm)" #postForm="ngForm">
      <section class="new_store_header">
        <p class="store">Store #</p>
        <input class="new_storeNum" [(ngModel)]="new_storeNum" name="new_storeNum" maxlength="4" required>
      </section>
      <section class="info">
        <!-- <div class="add_storeNum">
          <label for="new_storeNum">Store:</label>
        </div> -->
        <div class="info_details">
          <div class="type">
            <label for="issue_type">Issue</label>
            <select class="issue_type" name="issue_type" [(ngModel)]="issue_type" name="issue_type">
              <option value="-">-Select-</option>
              <option value="SERVER">SERVER</option>
              <option value="WAN">WAN</option>
              <option value="LAN">LAN</option>
              <option value="VOICE">VOICE</option>
            </select>
          </div>
          <div class="serv_type" *ngIf="issue_type === 'SERVER'">
            <label for="server">Server Type</label>
            <select class="server" [(ngModel)]="server" name="server">
              <option value="-">-Select-</option>
              <option value="iSeries">iSeries</option>
              <option value="Linux">Linux</option>
            </select>
          </div>
          <div class="serv_model" *ngIf="issue_type === 'SERVER'">
            <label for="model_num">Server Model</label>
            <select class="model_num" [(ngModel)]="model_num" name="model_num">
              <option value="-">-Select-</option>
              <option value="P5" *ngIf="server === 'iSeries'">P5</option>
              <option value="P6" *ngIf="server === 'iSeries'">P6</option>
              <option value="P7" *ngIf="server === 'iSeries'">P7</option>
              <option value="P8" *ngIf="server === 'iSeries'">P8</option>
              <option value="P9" *ngIf="server === 'iSeries'">P9</option>
              <option value="x3100" *ngIf="server === 'Linux'">X3100</option>
              <option value="ts460" *ngIf="server === 'Linux'">TS460</option>
              <option value="st250" *ngIf="server === 'Linux'">ST250</option>
              <option value="st550" *ngIf="server === 'Linux'">ST550</option>
            </select>
          </div>
          <div class="comm_Pro" *ngIf="issue_type === 'WAN'">
            <label for="provider">Provider</label>
            <select class="provider" [(ngModel)]="provider" name="provider">
              <option value="-">-Select-</option>
              <option value="MetTel">MetTel</option>
              <option value="Vonage">Vonage</option>
              <option value="Windstream">Windstream</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div class="hard_ware" *ngIf="issue_type === 'LAN'">
            <label for="hware">Hardware</label>
            <select class="hware" [(ngModel)]="hware" name="hware">
              <option value="-">-Select-</option>
              <option value="Router" *ngIf="issue_type === 'LAN'">Cisco Router</option>
              <option value="Switch" *ngIf="issue_type === 'LAN'">Switch</option>
            </select>
          </div>
          <div class="bmc_tick">
            <label for="bmc_Num">BMC Ticket</label>
            <input class="bmc_Num" placeholder="-" [(ngModel)]="bmc_Num" name="bmc_Num">
          </div>
          <div class="vend_tick">
            <label for="vend_Num">Vendor Ticket</label>
            <input class="vend_Num" placeholder="-" [(ngModel)]="vend_Num" name="vend_Num">
          </div>
        </div>

      </section>
      <section class="updates">
        <div class="issue_row">
          <div class="date_row">
            <p>Date</p>
          </div>
          <div class="time_row">
            <p>Time</p>
          </div>
          <div class="comment_row">
            <p>Updates</p>
          </div>
        </div>
        <div class="entries">
          <div class="entry">
            <div class="date_entry">
              <p>-</p>
            </div>
            <div class="time_entry">
              <p>-</p>
            </div>
            <div class="entry_text">
              <p></p>
            </div>
          </div>
        </div>
      </section>
      <section class="add_update">
        <div class="add">
          <p class="add_header">Issue Details</p>
          <div class="dateTime">
            <label for="new_date">Start Date:</label>
            <input class="new_date" type="date" [(ngModel)]="new_date" name="new_date" min="2020-01-01" max="2025-01-01"
              required>
            <label for="new_time">Start Time:</label>
            <input class="new_time" type="time" [(ngModel)]="new_time" name="new_time" min="00:00" max="24:00" required>
          </div>
          <div class="new_entry_text">
            <textarea class="new_text" placeholder="What happened?" [(ngModel)]="new_text" name="new_text"></textarea>
          </div>
          <div class="new_entry_btns">
            <button class="post_up">POST</button>
            <button class="delete_up" id="delete_store" type="button" (click)="callCancelStore()">X</button>
          </div>
        </div>
      </section>
    </form>
  </div>
</div>
<router-outlet></router-outlet>